const GridShot={canvas:null,ctx:null,grid:[],stats:{score:0,startTime:Date.now()},init(){this.canvas=document.getElementById('gameCanvas');this.ctx=this.canvas.getContext('2d');this.resizeCanvas();window.addEventListener('resize',()=>this.resizeCanvas());this.canvas.addEventListener('click',(e)=>this.handleClick(e));document.getElementById('resetBtn').addEventListener('click',()=>this.reset());this.generateGrid();this.activateRandom();},resizeCanvas(){const rect=this.canvas.getBoundingClientRect();this.canvas.width=rect.width;this.canvas.height=rect.height;this.draw();},generateGrid(){const size=CONFIG.gridshot.gridSize;const spacing=(this.canvas.width-100)/size;this.grid=[];for(let i=0;i<size;i++){for(let j=0;j<size;j++){this.grid.push({x:50+spacing*j+spacing/2,y:50+spacing*i+spacing/2,radius:CONFIG.gridshot.targetRadius,active:false});}}},activateRandom(){this.grid.forEach(t=>t.active=false);const idx=Math.floor(Math.random()*this.grid.length);this.grid[idx].active=true;this.draw();},draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);this.grid.forEach(t=>{this.ctx.beginPath();this.ctx.arc(t.x,t.y,t.radius,0,Math.PI*2);this.ctx.fillStyle=t.active?'#ef4444':'#d1d5db';this.ctx.fill();});},handleClick(e){const rect=this.canvas.getBoundingClientRect();const x=e.clientX-rect.left;const y=e.clientY-rect.top;this.grid.forEach(t=>{if(t.active){const d=Math.sqrt((x-t.x)**2+(y-t.y)**2);if(d<=t.radius){this.stats.score++;this.activateRandom();this.updateStats();}}});},updateStats(){const elapsed=(Date.now()-this.stats.startTime)/1000;document.getElementById('score').textContent=this.stats.score;document.getElementById('time').textContent=`${elapsed.toFixed(1)}s`;},reset(){this.stats={score:0,startTime:Date.now()};this.activateRandom();this.updateStats();}};GridShot.init();